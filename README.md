# üì¶ GravitySDK for Flutter

`GravitySDK` ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–π –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö Flutter-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ —à–∞–±–ª–æ–Ω–∞–º, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º, bottom sheet).

## üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [‚öôÔ∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è](#-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- [üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã initialize](#-–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-initialize)
- [üé® ProductWidgetBuilder ‚Äî –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤](#productwidgetbuilder--–∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è-–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è-–ø—Ä–æ–¥—É–∫—Ç–æ–≤)
- [üßë –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏](#-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- [üìÑ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ —Å–æ–±—ã—Ç–∏—è](#-–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ-–∏-—Å–æ–±—ã—Ç–∏—è)
- [üìà –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ](#-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ)
- [üß© –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞](#-–ø–æ–ª—É—á–µ–Ω–∏–µ-–∫–æ–Ω—Ç–µ–Ω—Ç–∞)
- [üñºÔ∏è –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞](#-–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ-–∫–æ–Ω—Ç–µ–Ω—Ç–∞)
- [‚ùó –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [üìå –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [üì¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –∏ –≤–∫–ª–∞–¥](#-–æ–±—Ä–∞—Ç–Ω–∞—è-—Å–≤—è–∑—å-–∏-–≤–∫–ª–∞–¥)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK —Å –∫–ª—é—á–æ–º API –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–µ–∫—Ü–∏–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –ø—Ä–æ–∫—Å–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å–µ—â–µ–Ω–∏–π —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ —à–∞–±–ª–æ–Ω—É
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤:
    - –ú–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
    - Bottom sheet
    - –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
    - Bottom sheet —Å —Ä—è–¥–æ–º —Ç–æ–≤–∞—Ä–æ–≤
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å –ø–∞–∫–µ—Ç –≤ —Ñ–∞–π–ª `pubspec.yaml`:

```yaml
dependencies:
  gravity_sdk: ^0.8.0
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É:

```bash
flutter pub get
```

–ò –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π –ø–∞–∫–µ—Ç –≤ —Å–≤–æ—ë–º –∫–æ–¥–µ:

```dart
import 'package:gravity_sdk/gravity_sdk.dart';
```

## ‚öôÔ∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã SDK –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –±–∞–∑–æ–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é, –ø–µ—Ä–µ–¥–∞–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `apiKey` –∏ `section`. –ò—Ö –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.

```dart
await GravitySDK.instance.initialize(
  apiKey: 'api-key',
  section: 'section',
);
```

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã initialize

```dart
Future<void> initialize({
  required String apiKey,
  required String section,
  ProductWidgetBuilder? productWidgetBuilder,
  GravityEventCallback? gravityEventCallback,
  bool useAdvertisingId = false,
});
```

- `productWidgetBuilder` ‚Äî –∫–∞—Å—Ç–æ–º–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `gravityEventCallback` ‚Äî –∫–æ–ª–±—ç–∫, –≤—ã–∑—ã–≤–∞–µ–º—ã–π –ø—Ä–∏ —Ç—Ä–µ–∫–∏–Ω–≥–µ —Å–æ–±—ã—Ç–∏–π
- `useAdvertisingId` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

## ProductWidgetBuilder ‚Äî –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤

ProductWidgetBuilder ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –∫–∞–º–ø–∞–Ω–∏–π. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å, –ø–æ–∑–≤–æ–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ —Ç–æ–≤–∞—Ä–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –∫–∞–º–ø–∞–Ω–∏—é, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Å—Ç–∏–ª—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?**

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ SDK, —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–æ–¥—É–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –∞–∫—Ü–∏–∏, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è). –ß—Ç–æ–±—ã —ç—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –≤–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, SDK –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é ProductWidgetBuilder.

–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å productWidgetBuilder, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: DefaultProductWidgetBuilder.

üì¶ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```dart
class MyCustomProductWidgetBuilder extends ProductWidgetBuilder {
  @override
  Widget build(Slot slot) {
    final item = slot.item;

    return Card(
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
      margin: EdgeInsets.symmetric(horizontal: 8, vertical: 4),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          if (item.imageUrl != null)
            ClipRRect(
              borderRadius: BorderRadius.vertical(top: Radius.circular(12)),
              child: Image.network(
                item.imageUrl!,
                height: 160,
                width: double.infinity,
                fit: BoxFit.cover,
              ),
            ),
          Padding(
            padding: const EdgeInsets.all(12.0),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                if (item.isNew == 'true')
                  Padding(
                    padding: const EdgeInsets.only(bottom: 4.0),
                    child: Text(
                      'üî• –ù–æ–≤–∏–Ω–∫–∞',
                      style: TextStyle(color: Colors.red, fontWeight: FontWeight.bold),
                    ),
                  ),
                Text(
                  item.name,
                  style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold),
                ),
                SizedBox(height: 4),
                Text(
                  '${item.price}',
                  style: TextStyle(fontSize: 14, color: Colors.black87),
                ),
                if (item.oldPrice != null)
                  Text(
                    '${item.oldPrice}',
                    style: TextStyle(
                      fontSize: 12,
                      color: Colors.grey,
                      decoration: TextDecoration.lineThrough,
                    ),
                  ),
                SizedBox(height: 8),
                if (item.inStock != null)
                  Text(
                    item.inStock! ? '–í –Ω–∞–ª–∏—á–∏–∏' : '–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏',
                    style: TextStyle(
                      fontSize: 12,
                      color: item.inStock! ? Colors.green : Colors.red,
                    ),
                  ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}
```

–ü–µ—Ä–µ–¥–∞—á–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ builder‚Äô–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SDK:

```dart
await GravitySDK.instance.initialize(
  apiKey: 'your-api-key',
  section: 'your-section-id',
  productWidgetBuilder: MyCustomProductWidgetBuilder(),
);
```

## üßë –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```dart
GravitySDK.instance.setUser('user-id', 'session-id');

GravitySDK.instance.setOptions(
  options: Options(...),
  contentSettings: ContentSettings(...),
  proxyUrl: 'https://your-proxy.com',
);
```

## üìÑ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ —Å–æ–±—ã—Ç–∏—è

```dart
await GravitySDK.instance.trackView(
  pageContext: PageContext(...),
);

await GravitySDK.instance.triggerEvent(
  events: [TriggerEvent(...)],
  pageContext: PageContext(...),
);
```

## üìà –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

```dart
GravitySDK.instance.sendContentEngagement(ContentImpressionEngagement(...));
GravitySDK.instance.sendProductEngagement(ProductClickEngagement(...));
```

## üß© –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```dart
final content = await GravitySDK.instance.getContent('template-id');
```

## üñºÔ∏è –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ

```dart
GravitySDK.instance.showModalContent(context, content);
```

### Bottom Sheet

```dart
GravitySDK.instance.showBottomSheetContent(context, content);
```

### Bottom Sheet: –†—è–¥ —Ç–æ–≤–∞—Ä–æ–≤

```dart
GravitySDK.instance.showBottomSheetProductsRow(context, content);
```

### –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–µ –æ–∫–Ω–æ

```dart
GravitySDK.instance.showFullScreenContent(context, content);
```

## ‚ùó –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–∞–º–∏ SDK –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ:

```
GravitySDK is not initialized. Call initialize() first.
```

